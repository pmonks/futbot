#!/usr/bin/env bash

set -e
set -o pipefail

echo "‚ÑπÔ∏è Downloading dependencies..."
clojure -Srepro -J-Dclojure.main.report=stderr -P

echo "‚ÑπÔ∏è Updating pom.xml..."
clojure -Srepro -J-Dclojure.main.report=stderr -Spom

echo "‚ÑπÔ∏è Building uberjar..."
clojure -Srepro -J-Dclojure.main.report=stderr -T:build uber    # Note: Clojure CLI doesn't support --report with -X or -T üôÑ; see https://ask.clojure.org/index.php/10692/clojure-cli-report-incompatible-with-x for details
